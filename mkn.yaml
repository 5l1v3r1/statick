#! clean build test -O

name: statick
scm: https://github.com/dekken/statick

parent: base

profile:
- name: base
  inc: inc
  if_arg:
    nix: -std=c++17 -O3 -march=native -funroll-loops -ftree-vectorize -fopt-info-vec  -fopt-info-inline -fopt-info-inline-optimized -fopt-info-vec-optimized  #-fopt-info-vec-missed
    win_cl: -std:c++17 -DNOMINMAX
  if_link:
    nix: -pthread
  dep: io.cereal mkn.kul lang.pybind11
  test: test/(\w).cpp
  mod:
  - name: lang.python3
    compile:
      with: numpy
    link:
      delete: -Wl,-stack_size,1000000

- name: statick.py
  parent: base
  install: statick/bin
  out: statick
  src: src/pybind/statick.cpp
  mode: none
  mod:
  - name: lang.pybind11
  test: example.py

- name: clean
  parent: base
  mod:
  - name: clang.format
    link:
      paths: .
